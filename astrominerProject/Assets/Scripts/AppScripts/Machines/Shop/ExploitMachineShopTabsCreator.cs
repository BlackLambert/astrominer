using SBaier.DI;
using System;
using UnityEngine;

namespace SBaier.Astrominer
{
	public class ExploitMachineShopTabsCreator : MonoBehaviour, Injectable
	{
		[SerializeField]
		private Transform _hook;

		private Factory<ExploitMachineShopTab, int> _factory;
		private ExploitMachineSettings _settings;

		public void Inject(Resolver resolver)
		{
			_factory = resolver.Resolve<Factory<ExploitMachineShopTab, int>>();
			_settings = resolver.Resolve<ExploitMachineSettings>();
		}

		private void Start()
		{
			CreateTabs();
		}

		private void CreateTabs()
		{
			for (int i = 0; i < _settings.Levels.Length; i++)
				CreateTab(i);
		}

		private void CreateTab(int i)
		{
			ExploitMachineShopTab tab = _factory.Create(i);
			tab.transform.SetParent(_hook, false);
		}
	}
}
