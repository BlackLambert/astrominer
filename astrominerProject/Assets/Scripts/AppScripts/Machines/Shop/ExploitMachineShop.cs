using SBaier.DI;
using System;
using UnityEngine;

namespace SBaier.Astrominer
{
    public class ExploitMachineShop : MonoBehaviour, Injectable
    {
	    public event Action OnPooling;
        public int SelectedLevel { get; private set; } = 0;
		public ExploitMachineLevelSettings SelectedLevelSettings => _settings.Levels[SelectedLevel];
		public event Action OnSelectedLevelChange;

		private ExploitMachineSettings _settings;

		public void Inject(Resolver resolver)
		{
			_settings = resolver.Resolve<ExploitMachineSettings>();
		}

		public void Select(int level)
		{
			if (level >= _settings.Levels.Length)
				throw new ArgumentOutOfRangeException();
			SelectedLevel = level;
			OnSelectedLevelChange?.Invoke();
		}

		public void InvokeOnPooling()
		{
			OnPooling?.Invoke();
		}
	}
}
