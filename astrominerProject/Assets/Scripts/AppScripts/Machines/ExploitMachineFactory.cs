using SBaier.DI;
using System;
using UnityEngine;

namespace SBaier.Astrominer
{
	public class ExploitMachineFactory : Factory<ExploitMachine, int>, Injectable
	{
		private ExploitMachineSettings _settings;

		public void Inject(Resolver resolver)
		{
			_settings = resolver.Resolve<ExploitMachineSettings>();
		}

		public ExploitMachine Create(int level)
		{
			if (_settings.Levels.Length <= level || level < 0)
				throw new ArgumentOutOfRangeException();
			ExploitMachineLevelSettings levelSettings = _settings.Levels[level];
			ExploitMachine.Arguments arguments = new ExploitMachine.Arguments(level, levelSettings.ExploitPower);
			return new ExploitMachine(arguments);
		}
	}
}
